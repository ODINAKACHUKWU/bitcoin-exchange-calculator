rvm:
  - 2.4.1

addons:
  postgresql: 11.7
  code_climate:
    repo_token: <%= ENV['CODE_CLIMATE_TOKEN'] %>

dist: trusty

language: ruby

cache: bundler

services:
  - postgresql

test:
  adapter: postgresql
  database: travis_ci_test

before_script:
  - bundle
  - bundle exec rails db:create
  - bundle exec rails db:migrate RAILS_ENV=test

script:
  - bundle exec rails db:migrate RAILS_ENV=test
  - bundle exec rspec

after_success:
  - bundle exec codeclimate-test-reporter
